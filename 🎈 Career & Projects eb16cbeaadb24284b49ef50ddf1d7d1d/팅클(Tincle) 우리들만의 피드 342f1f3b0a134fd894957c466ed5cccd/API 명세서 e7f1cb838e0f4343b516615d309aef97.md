# API 명세서

[컨벤션](API%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%E1%84%89%E1%85%A5%20e7f1cb838e0f4343b516615d309aef97/%E1%84%8F%E1%85%A5%E1%86%AB%E1%84%87%E1%85%A6%E1%86%AB%E1%84%89%E1%85%A7%E1%86%AB%20dd898ad3d3d344129bad5410f4912841.md)

### BASE_URL : [http://13.209.23.236:8080](http://13.209.23.236:8080/)

### URL : [https://tincle.store](https://tincle.store/hello)

### SWAGGER_URL: [http://13.209.23.236:8080/docs](http://13.209.23.236:8080/docs)

[서버에서 처리한 에러 목록](API%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%E1%84%89%E1%85%A5%20e7f1cb838e0f4343b516615d309aef97/%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%E1%84%8B%E1%85%A6%E1%84%89%E1%85%A5%20%E1%84%8E%E1%85%A5%E1%84%85%E1%85%B5%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%8B%E1%85%A6%E1%84%85%E1%85%A5%20%E1%84%86%E1%85%A9%E1%86%A8%E1%84%85%E1%85%A9%E1%86%A8%20517deab1782048ef999d369e9ace4243.md)

- 공통 에러
    - 401 : 로그인 접근 제한(JWT 오류)
    
    ```json
    {
        "statusCode": 1000,
        "data": {},
        "message": "access denied."
    }
    ```
    
    - 400: valid 오류(메시지 길이 초과 등)
    
    ```json
    {
        "statusCode": -2,
        "data": {},
        "message": "크기가 0에서 30 사이여야 합니다"
    }
    ```
    

## 로그인

[로그인](API%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%E1%84%89%E1%85%A5%20e7f1cb838e0f4343b516615d309aef97/%E1%84%85%E1%85%A9%E1%84%80%E1%85%B3%E1%84%8B%E1%85%B5%E1%86%AB%20d500fa3c47b043c78095137a985c1a5c.csv)

## 회원

[회원](API%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%E1%84%89%E1%85%A5%20e7f1cb838e0f4343b516615d309aef97/%E1%84%92%E1%85%AC%E1%84%8B%E1%85%AF%E1%86%AB%20657a5160c7374b49a9a049c4e20b7391.csv)

## 친구

[친구](API%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%E1%84%89%E1%85%A5%20e7f1cb838e0f4343b516615d309aef97/%E1%84%8E%E1%85%B5%E1%86%AB%E1%84%80%E1%85%AE%203b3bab3499f3480eaa6289e073cc43fa.csv)

## 피드, 댓글

[피드, 댓글](API%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%E1%84%89%E1%85%A5%20e7f1cb838e0f4343b516615d309aef97/%E1%84%91%E1%85%B5%E1%84%83%E1%85%B3,%20%E1%84%83%E1%85%A2%E1%86%BA%E1%84%80%E1%85%B3%E1%86%AF%20addd78f0465f41538445031cdb71385b.csv)

## 이모티콘

[이모티콘](API%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%E1%84%89%E1%85%A5%20e7f1cb838e0f4343b516615d309aef97/%E1%84%8B%E1%85%B5%E1%84%86%E1%85%A9%E1%84%90%E1%85%B5%E1%84%8F%E1%85%A9%E1%86%AB%20a0cc763204884064a65536a3904abc23.csv)

## S3 이미지

[기타](API%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%E1%84%89%E1%85%A5%20e7f1cb838e0f4343b516615d309aef97/%E1%84%80%E1%85%B5%E1%84%90%E1%85%A1%20ad7bcf8f7f3c4d1e8cd1747c030253ae.csv)

## 알림

`redirectTargetId` : 알림 클릭시 이동해야하는 대상의 PK

`targetEntity` : 알림 클릭 시 조회해야하는 대상

- FEED - 피드로 이동
- NOTIFICATION - 알림으로 이동

`redirectTargetId`로 내려오는 값이 `targetEntity`의 PK입니다.

- ex. `targetEntity`: Feed, `redirectTargetId`:1 → 1번 PK의 게시글
- FCM Message SPEC
    
    ```json
    // FCM Message SPEC
    {
        "validate_only": false, // 무시
        "message": {
            "token": "타겟 FCM 토큰",
            "data": {
                "title": "제목",
                "body": "내용",
                "redirectTargetId": "2", // 문자열임을 주의
                "type": "CREATE_FEED_COMMENT"
            }
        }
    }
    ```
    

**타입으로만 분기처리하면 될 것 같습니다.**

| 알림명 | 타입(notificationType) | 받는사람 | 리다이렉트 | targetEntity | 비고(redirectTargetId) |
| --- | --- | --- | --- | --- | --- |
| 친구 요청 알림 | CREATE_FRIENDSHIP_REQUEST | 친구 요청 받는 사람 | 알림 창 |  |  |
| 친구 요청 수락 | APPROVE_FRIENDSHIP_REQUEST | 친구 요청 보낸 사람 | 알림 창 |  |  |
| 피드에 이모티콘 반응 | REACT_EMOTICON_ON_FEED | 피드 작성자 | 해당 피드 | Feed | feedId |
| 댓글에 이모티콘 반응 | REACT_EMOTICON_ON_COMMENT | 댓글 작성자 | 해당 피드 | Feed | feedId |
| 내 피드에 댓글(피드 작성자x) | CREATE_COMMENT_ON_FEED | 피드 작성자 | 해당 피드 | Feed | feedId |
| 내 피드에 댓글(피드 작성자) | CREATE_COMMENT_ON_FEED | 댓글에 참여한 모두 | 해당 피드 | Feed | feedId |
| 내 댓글에 대댓글(댓글 작성자x) | CREATE_CHILD_COMMENT_ON_FEED | 댓글 작성자 | 해당 피드 | Feed | feedId |
| 내 댓글에 대댓글(댓글 작성자) | CREATE_CHILD_COMMENT_ON_FEED | 대댓글에 참여한 모두 | 해당 피드 | Feed | feedId |
| 지금 뭐해? 전송 | SEND_KNOCK | 뭐해? 대상자 | 알림 창 |  |  |
| 지금 뭐해?에 답장 피드 | CREATE_KNOCK_FEED | 뭐해? 보낸 모두 | 해당 피드 | Feed | feedId |

[알림](API%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%E1%84%89%E1%85%A5%20e7f1cb838e0f4343b516615d309aef97/%E1%84%8B%E1%85%A1%E1%86%AF%E1%84%85%E1%85%B5%E1%86%B7%20b774a6b8881a4a19a6cf262ae4e8642e.csv)