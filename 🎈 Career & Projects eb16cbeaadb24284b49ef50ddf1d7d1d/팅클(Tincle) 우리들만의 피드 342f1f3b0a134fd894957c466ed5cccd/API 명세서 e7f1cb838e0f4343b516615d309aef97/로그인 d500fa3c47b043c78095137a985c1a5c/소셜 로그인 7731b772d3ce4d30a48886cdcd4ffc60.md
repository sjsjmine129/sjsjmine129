# 소셜 로그인

URL Patterns: /auth/login
Last Updated: 2023년 9월 3일
담당자: 영두 우
Method: POST
작업 완료: Yes
1차 MVP: Yes

## POST /auth/login

---

기존의 회원이 있다면 로그인 진행 → AccessToken, RefreshToken 발행

없다면, 회원가입 sign Token 발급

<aside>
⚠️ **로그인 접근 시:**
기존의 가입된 유저인지에 따라 값을 다르게 내려줍니다.

새로운 유저일 경우 SignToken 을 발행

가입된 유저라면 로그인 진행을 해서 JWT 토큰을 내려줍니다.

</aside>

## **Request**

- **Body**
    
    ```json
    {
      "oauthAccessToken": "ya29.a0Aa4xrXNXkiDBMm7MtSneVejzvup",
      "authorizationCode": "eyJraWQiOiJmaDZCczhDIif",
      "socialType": "GOOGLE/KAKAO/APPLE",
    	"fcmToken": "diN4HidUT3Gcij4KW1ROKq:APA91bHTTfdR_Vhn_Hm237_NAkhkDkdglVS2Ki9u1l_jhU_LKOZ4iYHLi0r_9Rc8GcbssCghI3WG9Gfool9jIep7_6NqemY4Z_bDLg8esjx6VMznJJPifDxhi6DuQIqbBFadkL5H5fro",
    	"nickname": "우영두"
    }
    ```
    
    - oauthAccessToken: Kakao만 입력
    - authorizationCode : Google, Apple 만 입력
    - socialType : GOOGLE/KAKAO/APPLE
    - fcmToken : fcm 토큰 입력
    - nickname: Apple 일 경우에 입력
        - accessToken으로 발급 받을 수 있나 찾아봤는데 아무리 봐도 없어서 클라이언트에서 넘겨줘야할 것 같아요 ㅠ

## Response

- **Success (200) : 로그인 성공 → JWT 발급**
    
    ```json
    {
        "data": {
            "accessToken": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ2dkY3NER0VG9EREs2Q2NLOVFCYXpma0dOTWNNS29pdkJlNGcrbWRCVXgwPSIsInJvbGUiOiJST0xFX1VTRVIiLCJpYXQiOjE2NzI5ODUwNDYsImV4cCI6MTY3Mjk4ODA0Nn0.IBAJmsKYTQuHGnv4qt14kLY1mTRZK67Xk7iS_P4yGV-mUuiZla84ezgUdpDfdphotFb9tgc-Gzk4wIWXgMZX8w",
            "refreshToken": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ2dkY3NER0VG9EREs2Q2NLOVFCYXpma0dOTWNNS29pdkJlNGcrbWRCVXgwPSIsImlhdCI6MTY3Mjk4NTA0NiwiZXhwIjoxNjcyOTkxMDQ2fQ.XrjxsDGAKsD6MSdYHAAt9cGgVLZd7Vlf627YHfgRPLoueOYUV9MV9ZjD6mvWxTeHGa85xGjwOPDCKAxtroySAQ"
        }
    }
    ```
    

- **Error:**
    - **404 : 신규회원일 경우(유저가 없는 경우)\**
        
        **SignToken 발행**
        
        ```json
        {
            "statusCode": 1030,
            "data": {
                "signToken": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI1TEpQVzVMZ0pwazlpWHphS0ZMVzRLaG1nUFlpdy82UEgvdTNwSFlXTEkvYmtrSFVrY21FU1BvV3hHeE9PS3VlIiwic2lnbiI6IlJPTEVfVVNFUiIsImlhdCI6MTY3Mjk4NTEyOCwiZXhwIjoxNjcyOTg4MTI4fQ.Dguo6e1VfOVqDWlMv2EiYjvt74tlA3MtvfYNbt20-e0U33Vm6ndnIoB3aPCl5yAYk_fDxSa1Qovv5D3VOoq2Rg"
            },
            "message": "need to signup, X-ACCESS-TOKEN is issued."
        }
        ```