# S3 이미지 업로드

URL Patterns: /images
담당자: 영두 우
Method: POST
작업 완료: Yes
1차 MVP: Yes

## POST /files

---

AWS S3 이미지 업로드

파일을 보낼 시 파일 이름과 파일 주소 필요

## **Request**

- **Body (`form-data`)**
    
    
    | Key | 설명 | Value | value set |
    | --- | --- | --- | --- |
    | type | 사진의 종류 | String | {feed} |
    | files | 용량 : 10MB 이하 | File | 파일 확장자 : 
    { png, jpg, jpeg, gif } |
    - type : 이미지 종류
        - `feed` : 피드 이미지
        - `account` : 프로필 사진 이미지

## Response

- **Success (200) : 업로드 성공 (단일)**
    
    ```json
    {
        "data": {
            "files": [
                {
                    "filename": "20.1320.1230.1한글1@#!@#!@@%#^^.png",
                    "fileUrl": "https://s3.ap-northeast-2.amazonaws.com/plub/account/profileImage/anonymousUser_fbf27ade-dd8f-49e9-bf58-4ebd5743d06b_.png"
                }
            ]
        }
    }
    ```
    

- **Success (200) : 업로드 성공 (여러 개)**
    
    ```json
    {
        "data": {
            "files": [
                {
                    "filename": "e1634208214778.png",
                    "fileUrl": "https://s3.ap-northeast-2.amazonaws.com/plub/account/profileImage/anonymousUser_c25c2387-644a-446a-922b-9c2adf581522_.png"
                },
                {
                    "filename": "20.1320.1230.1한글1@#!@#!@@%#^^.png",
                    "fileUrl": "https://s3.ap-northeast-2.amazonaws.com/plub/account/profileImage/anonymousUser_cf915b23-30d6-48ab-986b-ca29df4bea64_.png"
                }
            ]
        }
    }
    ```
    
- **Error:**
    - **400 : 업로드 실패**
    
    ```json
    {
    		"statusCode": 9050,
        "data": {},
        "message": "AWS S3 upload fail."
    }
    ```
    
    - 400 : 파일 사이즈 초과 (10 MB)
    
    ```json
    {
        "statusCode": 9060,
        "data": {},
        "message": "exceeded file size."
    }
    ```
    
    - 400 : 약속된 타입 이름이 아닌 경우
    
    ```json
    {
        "statusCode": 9070,
        "data": {},
        "message": "invalid file type."
    }
    ```
    
    - 400 : files가 null 이거나 비어있는 경우
    
    ```json
    {
        "statusCode": 9010,
        "data": {},
        "message": "must not be empty,"
    }
    ```
    
    - 400 : type이 null이거나 빈 문자열일 경우
    
    ```json
    {
        "statusCode": 9010,
        "data": {},
        "message": "must not be blank,"
    }
    ```