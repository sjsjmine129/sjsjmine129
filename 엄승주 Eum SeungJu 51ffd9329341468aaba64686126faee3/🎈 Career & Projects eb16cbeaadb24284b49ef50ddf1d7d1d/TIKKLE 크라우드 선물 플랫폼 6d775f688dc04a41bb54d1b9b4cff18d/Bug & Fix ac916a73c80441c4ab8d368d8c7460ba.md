# Bug & Fix

- ios와 android의 safe area 조절 문제
    
    문제 1 :
    
    ios는 import {SafeAreaView} from 'react-native'; 를 사용하여 위쪽 status bar 부분의 공간을 확보, 이때 각 SafeAreaView의 색을 변경 할 수 없기에 화면 마다 <Safe>를 만들어 각각 색을 지정하도록 만듬
    
    android의 경우 각 status bar의 색을 변경가능 하므로 그 방식을 사용
    
    문제 2 : 안드로이드의 최신 버전의 경우 import {StatusBar} from 'react-native' 의 StatusBar.currentHeight에서 가져오는 영역의 기준에 차이가 존재
    
     'react-native-safe-area-context'  모듈을 사용해서 둘다 커버, ios에서는 위 모듈이 작동하지 않기에 ios는 기존의 방식을 유지
    
- 상품 페이지 카테고리, 필터 변경 후 스크롤을 내려서 새로 데이터 받아올 때 이전 경우로 로딩됨
    
    고려 사항 1 : setState가 확정적으로 작동하지 않고 느리기에 빨리 스크롤을 하면 반영이 되지 않는 경우
    
    → state를 확정적으로 바꿀 수 있는가 : 불가능
    
    → 모든 필터, 카테고리에 관한 state를 하나로 뭉쳐서 사용 : 시도 했지만 버그가 고쳐 지지 않음
    
    → state가 아니라 Reducer의 사용 : 버그 그대로
    
    고려 사항 2 : 위에서 생각한 것 처럼 state 문제가 맞는가?
    
    → 임시로 버튼을 만들어 현재의 state를 출력하는 기능으로 state들 확인
    
    → 확인 해보니 state는 빠르게 적용됨
    
    → state가 변경된 후에도 스크롤을 내리면 오류가 발생(이전 state의 데이터로 상품 데이터 가져옴)
    
    → 이전 state 가 따로 캐싱 혹은 저장 되어서 사용됨을 추측
    
    고려 사항 3 : 어디에 저장 되는가
    
    → 스크롤시 작동하는 데이터 불러오기 함수는 state를 가져다 씀
    
    → 스크롤 함수를 작동시키는 scroll listener에서 문제 발견
    
    → listener은 useEffect를 사용해서 상품 리스트의 길이가 변경 될때 재정의 된다
    
    → 이때 카테고리가 변경되어도 20개의 상품만 가져오기에 길이가 안변해서 listener가 재정의 되지 않고 이전의 state를 그대로 가지고 있는 상태에서 로딩을 불렀던 것
    
    → 상태가 변할 때도 listener를 재정의 하는 것으로 버그 해결
    
- 카카오 생일 데이터에 대한 오류
    
    문제 1 : 카카오 연동 회원가입, 로그인 을 만들 때 생일 데이터가 “0000-00-00”으로 가져와짐
    
    → 연동에서 key값이 이전 것이 들어가는 오류 key를 바꾸어 오류 해결
    
    문제 2 : 업데이트로 수정되기 전까지 생일이 0000-00-00으로 입력되어버린 유저들
    
    → 프론트에서 0000-00-00인 경유 생일 데이터 대신 생일이 입력되지 않았어요 메시지 출력
    
    → 생일 수정해서 입력하도록 입력란 구성
    
    → 생일을 사용하는 프론트 함수에서 생일 값 없어도 오류가 안나도록 수정
    
- Sentry 버전 체킹 추가
    
    문제 : Sentry에서 오류가 생기는데 해결된것인지 이전 버전에 따른 것인지 모름
    
    → Sentry Tag에 이전에 만들어둔 버전 확인 함수를 이용해서 버전, os를 태깅
    
- 현재 서비스 중인 앱의 백엔드 업데이트
    
    문제 1 : 백엔드를 기능 추가 혹은 버그 개선을 위해 업데이트 할 때 현재 사용자들이 사용하는 앱과의 충돌 때문에 자유로운 수정이 불가능
    
    → 백엔드의 버전화 : 단순히 현재의 aws lambda는 그대로 두고 같은 기능의 수정된 lambda를 만들어 업데이트, 추후 앱 프론트 업데이트시 바뀐 백엔드를 사용하도록 수정
    
- 펀딩 시작 버튼이 빠르게 누르면 연속으로 선택
    
    문제 1 : 펀딩 시작 버튼을 빠르게 연타하면 여러번 눌림, 백엔드에서 막지만 근본적으로 막고 싶음
    
    → 누르자마자 버튼을 비활성화 시키는 방식으로 변경
    
- ios와 android의 safe area 조절 문제
    
    문제 1 :
    
    ios는 import {SafeAreaView} from 'react-native'; 를 사용하여 위쪽 status bar 부분의 공간을 확보, 이때 각 SafeAreaView의 색을 변경 할 수 없기에 화면 마다 <Safe>를 만들어 각각 색을 지정하도록 만듬
    
    android의 경우 각 status bar의 색을 변경가능 하므로 그 방식을 사용
    
    문제 2 : 안드로이드의 최신 버전의 경우 import {StatusBar} from 'react-native' 의 StatusBar.currentHeight에서 가져오는 영역의 기준에 차이가 존재
    
     'react-native-safe-area-context'  모듈을 사용해서 둘다 커버, ios에서는 위 모듈이 작동하지 않기에 ios는 기존의 방식을 유지
    
-