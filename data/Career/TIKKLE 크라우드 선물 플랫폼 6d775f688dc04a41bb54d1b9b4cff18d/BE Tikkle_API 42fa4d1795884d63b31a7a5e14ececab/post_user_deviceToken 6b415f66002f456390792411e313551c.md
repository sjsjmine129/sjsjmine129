# post_user_deviceToken

기능 :  SNS 전송용 디바이스 토큰 가져와서 유저 테이블에저장

이 람다 부르기 이전에 로컬에 저장된 이전의 디바이스 토큰이 기존과 동일하면 호출 x

로컬 값이랑 다르면 그 값으로 이 함수 호출

유저 테이블에 있는 arn 데이터베이스에서 가져옴

SNS 에 있는 엔드포인트 arn 으로 찾아서 삭제

새로운 엔드포인트 새 디바이스토큰으로 만들고 arn 값 리턴 받음

새로운 값 유저 데이터베이스에 저장

 

## Input

## Output

|  | statusCode | return |
| --- | --- | --- |
| 성공 | 200 | let message = "success";

	if (ret1 === null) {
		message = "already friend";
	}

	return {
		statusCode: 200,
		body: JSON.stringify({
			accessToken: returnToken,
			message: message,
		}),
	}; |
|  |  |  |
| 실패
→토큰 오류 | 410 | console.log("ERROR : the token value is null or invalid");
return {
statusCode: 410,
body: "login again",
}; |
| 실패
→DB  쿼리 데이터 추가 오류 | 501 | console.log("Database post error: ", err);
return {
statusCode: 501,
body: err,
}; |
| 실패
→ DB 검색 쿼리 오류 | 501 | console.log("SQL error: ", err);
return {
statusCode: 501,
body: "SQL error: ",
}; |