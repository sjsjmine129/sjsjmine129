# íŒ¨í‚¤ì§€ ì„¤ì¹˜

ios/android ë¹Œë“œ ì¼ì§€

í˜„ì¬ ìƒíƒœ : ios, and ë‹¤ ë¹Œë“œ ì•ˆë¨

- ì²« ë¹Œë“œ
    
    ì²« pod install -repoupdate
    
    ì˜¤ë¥˜
    
    ```bash
    The Swift pod `FirebaseCoreInternal` depends upon `GoogleUtilities`, which does not define modules.
    To opt into those targets generating module maps (which is necessary to import them from Swift when building as static libraries), you may set `use_modular_headers!` globally in your Podfile, or specify `:modular_headers => true` for particular dependencies.
    ```
    
    [https://velog.io/@qkr135qkr/firebaseë¥¼-iOSì—-ì ìš©í•˜ë©´ì„œ-ë§ë‹¦ë“¤ì¸-ë¬¸ì œë“¤](https://velog.io/@qkr135qkr/firebase%EB%A5%BC-iOS%EC%97%90-%EC%A0%81%EC%9A%A9%ED%95%98%EB%A9%B4%EC%84%9C-%EB%A7%9E%EB%8B%A6%EB%93%A4%EC%9D%B8-%EB%AC%B8%EC%A0%9C%EB%93%A4)
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-12-28 á„‹á…©á„’á…® 11.02.35.png](%E1%84%91%E1%85%A2%E1%84%8F%E1%85%B5%E1%84%8C%E1%85%B5%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%8E%E1%85%B5%200f4d9d222b834f8190721ba88ce17a16/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-28_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_11.02.35.png)
    
    ë¡œ í•´ê²° ê°€ëŠ¥
    
    ```bash
    pod 'GoogleUtilities', :modular_headers => true
    ```
    
    ```bash
    target 'tinqle' do
      config = use_native_modules!
      pod 'GoogleUtilities', :modular_headers => true #ì¶”ê°€
    ```
    
    â†’ pod ëŠ” ë˜ëŠ”ë° ì‹¤í–‰ì´ ì•ˆë¨ ( ios, and ) ëª¨ë‘
    
    ios : firebase/ kakao ë“± ios ì„¤ì •ì´ ë¹ ì§„ë“¯
    
    and: why? ì™œ ì•ˆë˜ì§€?
    
    [android ì‹œë„]
    
    ì•ˆë“œë¡œì´ë“œ í´ë”ì—ì„œ   ./gradlew clean ì‹œë„
    
    â†’ ê¶Œí•œì´ ì—†ìŒ
    
    ```bash
    chmod +x gradlew
    ```
    
    ê¶Œí•œ ë¶€ì—¬ í›„ ì¬ì‹œë„
    
    ì¢€ ì„¤ì¹˜ ë˜ë‹¤ê°€ ë»‘ë‚¨
    
    ì˜¤ë¥˜ ë©”ì‹œì§€
    
    ```bash
    Configure project :react-native-flipper
    WARNING:Software Components will not be created automatically for Maven publishing from Android Gradle Plugin 8.0. To opt-in to the future behavior, set the Gradle property android.disableAutomaticComponentCreation=true in the `gradle.properties` file or use the new publishing DSL.
    
    > Task :app:processDebugGoogleServices FAILED
    
    Deprecated Gradle features were used in this build, making it incompatible with Gradle 9.0.
    
    You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.
    
    See https://docs.gradle.org/8.0.1/userguide/command_line_interface.html#sec:command_line_warnings
    26 actionable tasks: 21 executed, 5 up-to-date
    
    info ğŸ’¡ Tip: Make sure that you have set up your development environment correctly, by running react-native doctor. To read more about doctor command visit: https://github.com/react-native-community/cli/blob/main/packages/cli-doctor/README.md#doctor 
    
    FAILURE: Build failed with an exception.
    
    * What went wrong:
    Execution failed for task ':app:processDebugGoogleServices'.
    > File google-services.json is missing. The Google Services Plugin cannot function without it. 
       Searched Location: 
      /Users/sjsjmine1/Desktop/Tinqle-frontend/android/app/src/debug/google-services.json
      /Users/sjsjmine1/Desktop/Tinqle-frontend/android/app/src/google-services.json
      /Users/sjsjmine1/Desktop/Tinqle-frontend/android/app/src/Debug/google-services.json
      /Users/sjsjmine1/Desktop/Tinqle-frontend/android/app/google-services.json
    
    * Try:
    > Run with --stacktrace option to get the stack trace.
    > Run with --info or --debug option to get more log output.
    > Run with --scan to get full insights.
    
    * Get more help at https://help.gradle.org
    
    BUILD FAILED in 46s
    error Failed to install the app.
    info Run CLI with --verbose flag for more details.
    ```
    
    gpt
    
    ```bash
    The error indicates that the build process is failing because the google-services.json file is missing. This file is required for integrating Firebase services in your Android app.
    
    Here are the steps to resolve the issue:
    
    Add google-services.json: Make sure you have the google-services.json file for your Firebase project. This file contains configuration details for Firebase services. You can download it from the Firebase Console.
    
    Go to the Firebase Console.
    Select your project.
    In the left sidebar, click on the gear icon and go to Project settings.
    In the Your apps section, click on the Android icon.
    Download the google-services.json file.
    Once you have the file, place it in the android/app directory of your React Native project.
    ```
    
    íŒŒì´ì–´ ë² ì´ìŠ¤ ì„œë¹„ìŠ¤í‚¤ ê°€ ì—†ë‹¤
    
    12/30
    
    ì„œë¹„ìŠ¤í‚¤ ë°›ìŒ
    
    ì•ˆë“œë¡œì´ë“œ ë¹Œë“œ ì‹œë„
    
    ì•ˆë“œë¡œì´ë“œ ë¹Œë“œ ì„±ê³µ â†’ íŒŒì¼ë“¤ ì—†ì–´ì„œ ì‹¤íŒ¨ í–ˆë˜ ê²ƒ
    

# IOS íŒ¨í‚¤ì§€ ì„¤ì •

ë¬¸ì œì¸ íŒ¨í‚¤ì§€ê°€ ì–´ëŠê²ƒì¸ì§€ í™•ì¸

yarn remove ë¡œ í•˜ë‚˜ì”© ì‚­ì œ

- firebase ì‚­ì œ
    
    @react-native-firebase/app
    
    @react-native-firebase/auth
    
    @react-native-firebase/messaging
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-12-30 á„‹á…©á„’á…® 4.52.58.png](%E1%84%91%E1%85%A2%E1%84%8F%E1%85%B5%E1%84%8C%E1%85%B5%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%8E%E1%85%B5%200f4d9d222b834f8190721ba88ce17a16/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-30_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_4.52.58.png)
    
    ios ì‹¤í–‰ ë¶ˆê°€ ì˜¤ë¥˜ ë¡œê·¸ ê°„ë‹¨íˆ ë´¤ì„ ë•ŒëŠ” ë¬´ìŠ¨ ë¬¸ì œì¸ì§€ ëª¨ë¥´
    
- ì¹´ì¹´ì˜¤ ì‚­ì œ
    
    @react-native-seoul/kakao-login
    
    ![simulator_screenshot_AE4E5742-6F47-455A-A03B-7E8A0F60A0D9.png](%E1%84%91%E1%85%A2%E1%84%8F%E1%85%B5%E1%84%8C%E1%85%B5%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%8E%E1%85%B5%200f4d9d222b834f8190721ba88ce17a16/simulator_screenshot_AE4E5742-6F47-455A-A03B-7E8A0F60A0D9.png)
    
    ê¸°ì¡´ì˜ ì˜¤ë¥˜ëŠ” ì‚¬ë¼ì§ but ìƒˆë¡œìš´ ì˜¤ë¥˜ ë°œìƒ
    
    ë¹Œë“œëŠ” ì˜ ë˜ê³  ì‘ë™ë„ ì˜ë¨ But ì € ì˜¤ë¥˜ ë°œìƒ
    
    ì˜¤ë¥˜ ê´€ë ¨ ë§í¬
    
    [https://stackoverflow.com/questions/61980130/console-error-no-permission-handler-detected-react-native](https://stackoverflow.com/questions/61980130/console-error-no-permission-handler-detected-react-native)
    
    ì°¾ì•„ë³´ë‹ˆ **react-native-permissions íŒ¨í‚¤ì§€ì˜ ì„¤ì •ì´ ì•ˆë˜ì–´ìˆëŠ” ë¬¸ì œ**
    
    [https://www.npmjs.com/package/react-native-permissions](https://www.npmjs.com/package/react-native-permissions)
    
    ìœ„ ê³µì‹ ë¬¸ì„œì˜ ì„¤ì •ì„ ì¶©ì‹¤íˆ ìˆ˜í–‰í–ˆë‹¤.
    
    Profile
    
    ```bash
    # delete for react-native-permissions 12/30 sj
    # # Resolve react_native_pods.rb with node to allow for hoisting
    # require Pod::Executable.execute_command('node', ['-p',
    #   'require.resolve(
    #     "react-native/scripts/react_native_pods.rb",
    #     {paths: [process.argv[1]]},
    #   )', __dir__]).strip
    
    # add for react-native-permissions 12/30 sj
    def node_require(script)
       # Resolve script with node to allow for hoisting
    require Pod::Executable.execute_command('node', ['-p',
      "require.resolve(
        '#{script}',
        {paths: [process.argv[1]]},
      )", __dir__]).strip
    end
    
    node_require('react-native/scripts/react_native_pods.rb')
    node_require('react-native-permissions/scripts/setup.rb')
    
    platform :ios, min_ios_version_supported
    prepare_react_native_project!
    
    # add for react-native-permissions 12/30 sj
    # â¬‡ï¸ uncomment wanted permissions
    setup_permissions([
      # 'AppTrackingTransparency',
      # 'Bluetooth',
      # 'Calendars',
      # 'CalendarsWriteOnly',
      'Camera',
      # 'Contacts',
      # 'FaceID',
      # 'LocationAccuracy',
      # 'LocationAlways',
      # 'LocationWhenInUse',
      # 'MediaLibrary',
      # 'Microphone',
      # 'Motion',
      'Notifications',
      'PhotoLibrary',
      # 'PhotoLibraryAddOnly',
      # 'Reminders',
      # 'Siri',
      # 'SpeechRecognition',
      # 'StoreKit',
    ])
    ```
    
    info.plist
    
    ```bash
    <!-- react-native-permissions -->
    	 <key>NSCameraUsageDescription</key>
      <string>tinqleì•±ì˜ ì¹´ë©”ë¼ ê¶Œí•œì„ í—ˆìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</string>
    	<key>NSPhotoLibraryUsageDescription</key>
      <string>ì‚¬ì§„ ì‚¬ìš©ì„ ìœ„í•´ tinqleì•±ì˜ ê°¤ëŸ¬ë¦¬ ì ‘ê·¼ì„ í—ˆìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</string>
    ```
    
    ì—ëŸ¬ í•´ê²° ì™„ë£Œ!
    

## ì‚­ì œí•œ ëª¨ë“ˆ ì¬ì„¤ì¹˜ ì‹œì‘

## 1. @react-native-seoul/kakao-login

ê³µì‹ ë¬¸ì„œ  [https://www.npmjs.com/package/@react-native-seoul/kakao-login](https://www.npmjs.com/package/@react-native-seoul/kakao-login)

ì„¤ì¹˜ í•  ë•Œ ì°¸ê³ ë§í¬ [https://velog.io/@psb7391/RN-React-Native-ì¹´ì¹´ì˜¤-ë¡œê·¸ì¸](https://velog.io/@psb7391/RN-React-Native-%EC%B9%B4%EC%B9%B4%EC%98%A4-%EB%A1%9C%EA%B7%B8%EC%9D%B8)

info.plist

```bash
<!-- kaako login -->
	<key>CFBundleURLTypes</key>
	 <array>
		<dict>
	  <key>CFBundleTypeRole</key>
  	<string>Editor</string>
		<key>CFBundleURLSchemes</key>
		<array>
			<string>kakao12cbe5606f424138d2aa12ef7361fad5</string>
		</array>
		</dict>
	</array>
	<key>KAKAO_APP_KEY</key>
	<string>12cbe5606f424138d2aa12ef7361fad5</string>
	<!-- <key>KAKAO_APP_SCHEME</key> // ì„ íƒ ì‚¬í•­ ë©€í‹° í”Œë«í¼ ì•± êµ¬í˜„ ì‹œì—ë§Œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤
	<string>{ì¹´ì¹´ì˜¤ ì•± ìŠ¤í‚´ì„ ì ì–´ì£¼ì„¸ìš”}</string> // ì„ íƒ ì‚¬í•­  -->
	<key>LSApplicationQueriesSchemes</key>
	<array>
		<string>kakaokompassauth</string>
		<string>storykompassauth</string>
		<string>kakaolink</string>
	</array>
```

### Swift Bridging Header ì„¤ì •

xcodeì—ì„œ file -> new -> fileë¡œ ë“¤ì–´ê°€ì„œ Swift Fileì„ ìƒì„±í•©ë‹ˆë‹¤.

ë¸”ë¡œê·¸ ë§í¬ ì°¸ì¡°

**AppDelegate.m**

```bash
#import "AppDelegate.h"

// kakao login
#import <RNKakaoLogins.h>

#import <React/RCTBundleURLProvider.h>

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  self.moduleName = @"tinqle";
  // You can add your custom initial props in the dictionary below.
  // They will be passed down to the ViewController used by React Native.
  self.initialProps = @{};

  return [super application:application didFinishLaunchingWithOptions:launchOptions];
}

// kakao
- (BOOL)application:(UIApplication *)app
     openURL:(NSURL *)url
     options:(NSDictionary<UIApplicationOpenURLOptionsKey,id> *)options {
 if([RNKakaoLogins isKakaoTalkLoginUrl:url]) {
    return [RNKakaoLogins handleOpenUrl: url];
 }
 return NO;
}
```

![simulator_screenshot_FFF39C1E-63C1-4892-82A2-C377BA3713D3.png](%E1%84%91%E1%85%A2%E1%84%8F%E1%85%B5%E1%84%8C%E1%85%B5%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%8E%E1%85%B5%200f4d9d222b834f8190721ba88ce17a16/simulator_screenshot_FFF39C1E-63C1-4892-82A2-C377BA3713D3.png)

ì¹´ì¹´ì˜¤ ì„¤ì • ì„±ê³µ

ê·¼ë° ë„˜ì–´ê°€ì§ˆ ì•ŠëŠ”ë‹¤

login not started [AxiosError: Network Error]

í˜„ì¬ ì•ˆë˜ëŠ” ê²ƒìœ¼ë¡œ í™•ì¸

## 2. react-native-google-signin/google-signin

ë¹Œë“œë‘ ìƒê´€ì—†ëŠ” ë¶€ë¶„ 

but ì™œì¸ì§€ ë¡œê·¸ì¸ì´ ì•ˆëœë‹¤. â†’ 

```bash
useEffect(() => {
    console.log('####', Config);
    GoogleSignin.configure({
      webClientId: Config.GOOGLE_CLIENT_ID,
      offlineAccess: true,
    });
  }, []);
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-12-30 á„‹á…©á„’á…® 11.37.32.png](%E1%84%91%E1%85%A2%E1%84%8F%E1%85%B5%E1%84%8C%E1%85%B5%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%8E%E1%85%B5%200f4d9d222b834f8190721ba88ce17a16/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-12-30_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_11.37.32.png)

ë¶€ë¶„ì—ì„œ config ì— GOOGLE_CLIENT_IDê°€ ì—†ë‹¤

.env íŒŒì¼ì˜ ëˆ„ë½ì´ ì›ì¸

.env ì¶”ê°€ì‹œ êµ¬ê¸€ ë¡œê·¸ì¸ì€ ì˜ ë¨ But axios error ë°œìƒ

```bash
LOG  error  [AxiosError: Request failed with status code 400]
```

axios.post(`${Config.API_URL}/auth/signup ì—ì„œ codeê°€ ë¹ ì ¸ ìˆìŒ

```json
{
  "signToken" : String,
	"usePolicy" : true,
	"agePolicy": true,
	"personalPolicy": true,
	"marketPolicy": true,
	"fcmToken": String,
	"code" : String
}
```

ì„ì‹œë¡œ code â€˜aaaaaaâ€™ê°’ ë„£ì–´ì„œ í•´ê²°

ios ì„¤ì •ì—ì„œ firebaseê°€ ì„ í–‰ë˜ì–´ì•¼ í•¨ì„ í™•ì¸ â†’ auth ì¸ë“¯

ì„¤ì¹˜ ë³´ë¥˜

@react-native-firebase/app

@react-native-firebase/auth

@react-native-firebase/messaging

## 3. @react-native-firebase/app

firebase messaging ìœ„í•´ì„œ app ë¯¸ë¦¬ ì„¤ì¹˜ í•„ìš”

@react-native-firebase/app ì„¤ì¹˜ & ì„¤ì •

ì°¸ê³  ë§í¬ : [https://velog.io/@jinsunee/react-native-firebase-ì„¤ì •](https://velog.io/@jinsunee/react-native-firebase-%EC%84%A4%EC%A0%95)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-01-01 á„‹á…©á„’á…® 1.31.26.png](%E1%84%91%E1%85%A2%E1%84%8F%E1%85%B5%E1%84%8C%E1%85%B5%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%8E%E1%85%B5%200f4d9d222b834f8190721ba88ce17a16/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-01-01_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_1.31.26.png)

firebase í”„ë¡œì íŠ¸ì— ios ì¶”ê°€

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-01-01 á„‹á…©á„’á…® 1.31.09.png](%E1%84%91%E1%85%A2%E1%84%8F%E1%85%B5%E1%84%8C%E1%85%B5%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%8E%E1%85%B5%200f4d9d222b834f8190721ba88ce17a16/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-01-01_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_1.31.09.png)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-01-01 á„‹á…©á„’á…® 1.32.02.png](%E1%84%91%E1%85%A2%E1%84%8F%E1%85%B5%E1%84%8C%E1%85%B5%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%8E%E1%85%B5%200f4d9d222b834f8190721ba88ce17a16/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-01-01_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_1.32.02.png)

ios í”„ë¡œì íŠ¸ì— info.plist ì¶”ê°€

[AppDelegate.mm](http://appdelegate.mm/)

```bash
// Firebase ì„¤ì • 24.01.01
#import <Firebase.h>
//ì¶”ê°€ëœ ë¶€ë¶„

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

//ì¶”ê°€ ëœ ë¶€ë¶„
  if ([FIRApp defaultApp] == nil) {
    [FIRApp configure];
  }
 //ì¶”ê°€ëœ ë¶€ë¶„

  self.moduleName = @"tinqle";
  // You can add your custom initial props in the dictionary below.
  // They will be passed down to the ViewController used by React Native.
  self.initialProps = @{};

  return [super application:application didFinishLaunchingWithOptions:launchOptions];
}
```

## @react-native-firebase/auth ì„¤ì¹˜

ì„¤ì¹˜ ê³„ì† ì‹¤íŒ¨ ì™œì¸ì§€ ì´ìœ  ëª¨ë¦„

ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ íšŒì›ê°€ì… ë¨ì„ í™•ì¸ + í•œ ê³³ì—ì„œë§Œ ì‚¬ìš©

ì¼ë‹¨ ì£¼ì„ì²˜ë¦¬ í•˜ê³  ì‚¬ìš©í•˜ê¸°ë¡œ ì„¤ì •